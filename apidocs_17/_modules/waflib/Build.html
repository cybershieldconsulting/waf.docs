

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>waflib.Build &mdash; Waf v1.7.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="Waf v1.7.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Waf v1.7.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for waflib.Build</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>
<span class="c"># Thomas Nagy, 2005-2010 (ita)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Classes related to the build phase (build, clean, install, step, etc)</span>

<span class="sd">The inheritance tree is the following:</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">errno</span><span class="o">,</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">shutil</span>
<span class="k">try</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">cPickle</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">pickle</span> <span class="kn">as</span> <span class="nn">cPickle</span>
<span class="kn">from</span> <span class="nn">waflib</span> <span class="kn">import</span> <span class="n">Runner</span><span class="p">,</span> <span class="n">TaskGen</span><span class="p">,</span> <span class="n">Utils</span><span class="p">,</span> <span class="n">ConfigSet</span><span class="p">,</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Logs</span><span class="p">,</span> <span class="n">Options</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">Errors</span>
<span class="kn">import</span> <span class="nn">waflib.Node</span>

<span class="n">CACHE_DIR</span> <span class="o">=</span> <span class="s">&#39;c4che&#39;</span>
<span class="sd">&quot;&quot;&quot;Location of the cache files&quot;&quot;&quot;</span>

<span class="n">CACHE_SUFFIX</span> <span class="o">=</span> <span class="s">&#39;_cache.py&#39;</span>
<span class="sd">&quot;&quot;&quot;Suffix for the cache files&quot;&quot;&quot;</span>

<span class="n">INSTALL</span> <span class="o">=</span> <span class="mi">1337</span>
<span class="sd">&quot;&quot;&quot;Positive value &#39;-&gt;&#39; install, see :py:attr:`waflib.Build.BuildContext.is_install`&quot;&quot;&quot;</span>

<span class="n">UNINSTALL</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1337</span>
<span class="sd">&quot;&quot;&quot;Negative value &#39;&lt;-&#39; uninstall, see :py:attr:`waflib.Build.BuildContext.is_install`&quot;&quot;&quot;</span>

<span class="n">SAVED_ATTRS</span> <span class="o">=</span> <span class="s">&#39;root node_deps raw_deps task_sigs&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="sd">&quot;&quot;&quot;Build class members to save between the runs (root, node_deps, raw_deps, task_sigs)&quot;&quot;&quot;</span>

<span class="n">CFG_FILES</span> <span class="o">=</span> <span class="s">&#39;cfg_files&#39;</span>
<span class="sd">&quot;&quot;&quot;Files from the build directory to hash before starting the build (``config.h`` written during the configuration)&quot;&quot;&quot;</span>

<span class="n">POST_AT_ONCE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="sd">&quot;&quot;&quot;Post mode: all task generators are posted before the build really starts&quot;&quot;&quot;</span>

<span class="n">POST_LAZY</span> <span class="o">=</span> <span class="mi">1</span>
<span class="sd">&quot;&quot;&quot;Post mode: post the task generators group after group&quot;&quot;&quot;</span>

<span class="n">POST_BOTH</span> <span class="o">=</span> <span class="mi">2</span>
<span class="sd">&quot;&quot;&quot;Post mode: post the task generators at once, then re-check them for each group&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BuildContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext">[docs]</a><span class="k">class</span> <span class="nc">BuildContext</span><span class="p">(</span><span class="n">Context</span><span class="o">.</span><span class="n">Context</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;executes the build&#39;&#39;&#39;</span>

	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;build&#39;</span>
	<span class="n">variant</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">BuildContext</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">is_install</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="sd">&quot;&quot;&quot;Non-zero value when installing or uninstalling file&quot;&quot;&quot;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">top_dir</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;top_dir&#39;</span><span class="p">,</span> <span class="n">Context</span><span class="o">.</span><span class="n">top_dir</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">run_dir</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;run_dir&#39;</span><span class="p">,</span> <span class="n">Context</span><span class="o">.</span><span class="n">run_dir</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">post_mode</span> <span class="o">=</span> <span class="n">POST_AT_ONCE</span>
		<span class="sd">&quot;&quot;&quot;post the task generators at once, group-by-group, or both&quot;&quot;&quot;</span>

		<span class="c"># output directory - may be set until the nodes are considered</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">out_dir</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;out_dir&#39;</span><span class="p">,</span> <span class="n">Context</span><span class="o">.</span><span class="n">out_dir</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;cache_dir&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">CACHE_DIR</span>

		<span class="c"># map names to environments, the &#39;&#39; must be defined</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="c"># ======================================= #</span>
		<span class="c"># cache variables</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">task_sigs</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="sd">&quot;&quot;&quot;Signatures of the tasks (persists between build executions)&quot;&quot;&quot;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">node_deps</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="sd">&quot;&quot;&quot;Dict of node dependencies found by :py:meth:`waflib.Task.Task.scan` (persists between build executions)&quot;&quot;&quot;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">raw_deps</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="sd">&quot;&quot;&quot;Dict of custom data returned by :py:meth:`waflib.Task.Task.scan` (persists between build executions)&quot;&quot;&quot;</span>

		<span class="c"># list of folders that are already scanned</span>
		<span class="c"># so that we do not need to stat them one more time</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_contents</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">task_gen_cache_names</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">launch_dir</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">launch_dir</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">jobs</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">jobs</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">targets</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">keep</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">keep</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cache_global</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">cache_global</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">nocache</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">nocache</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">progress_bar</span>

		<span class="c">############ stuff below has not been reviewed</span>

		<span class="c"># Manual dependencies.</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">deps_man</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
		<span class="sd">&quot;&quot;&quot;Manual dependencies set by :py:meth:`waflib.Build.BuildContext.add_manual_dependency`&quot;&quot;&quot;</span>

		<span class="c"># just the structure here</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">current_group</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Current build group</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		List containing lists of task generators</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">group_names</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Map group names to the group lists. See :py:meth:`waflib.Build.BuildContext.add_group`</span>
<span class="sd">		&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BuildContext.get_variant_dir"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_variant_dir">[docs]</a>	<span class="k">def</span> <span class="nf">get_variant_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Getter for the variant_dir attribute&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">variant</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_dir</span>
		<span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">out_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variant</span><span class="p">)</span></div>
	<span class="n">variant_dir</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_variant_dir</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<div class="viewcode-block" id="BuildContext.__call__"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.__call__">[docs]</a>	<span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a task generator and add it to the current build group. The following forms are equivalent::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				tg = bld(a=1, b=2)</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				tg = bld()</span>
<span class="sd">				tg.a = 1</span>
<span class="sd">				tg.b = 2</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				tg = TaskGen.task_gen(a=1, b=2)</span>
<span class="sd">				bld.add_to_group(tg, None)</span>

<span class="sd">		:param group: group name to add the task generator to</span>
<span class="sd">		:type group: string</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">kw</span><span class="p">[</span><span class="s">&#39;bld&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">TaskGen</span><span class="o">.</span><span class="n">task_gen</span><span class="p">(</span><span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">task_gen_cache_names</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># reset the cache, each time</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">add_to_group</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="BuildContext.__copy__"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.__copy__">[docs]</a>	<span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Implemented to prevents copies of build contexts (raises an exception)&quot;&quot;&quot;</span>
		<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;build contexts are not supposed to be copied&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.install_files"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.install_files">[docs]</a>	<span class="k">def</span> <span class="nf">install_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Actual implementation provided by :py:meth:`waflib.Build.InstallContext.install_files`&quot;&quot;&quot;</span>
		<span class="k">pass</span>
</div>
<div class="viewcode-block" id="BuildContext.install_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.install_as">[docs]</a>	<span class="k">def</span> <span class="nf">install_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Actual implementation provided by :py:meth:`waflib.Build.InstallContext.install_as`&quot;&quot;&quot;</span>
		<span class="k">pass</span>
</div>
<div class="viewcode-block" id="BuildContext.symlink_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.symlink_as">[docs]</a>	<span class="k">def</span> <span class="nf">symlink_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Actual implementation provided by :py:meth:`waflib.Build.InstallContext.symlink_as`&quot;&quot;&quot;</span>
		<span class="k">pass</span>
</div>
<div class="viewcode-block" id="BuildContext.load_envs"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.load_envs">[docs]</a>	<span class="k">def</span> <span class="nf">load_envs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		The configuration command creates files of the form ``build/c4che/NAMEcache.py``. This method</span>
<span class="sd">		creates a :py:class:`waflib.ConfigSet.ConfigSet` instance for each ``NAME`` by reading those</span>
<span class="sd">		files. The config sets are then stored in the dict :py:attr:`waflib.Build.BuildContext.allenvs`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;The project was not configured: run &quot;waf configure&quot; first!&#39;</span><span class="p">)</span>
		<span class="n">lst</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">ant_glob</span><span class="p">(</span><span class="s">&#39;**/*</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">CACHE_SUFFIX</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">lst</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;The cache directory is empty: reconfigure the project&#39;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
			<span class="n">name</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">path_from</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">CACHE_SUFFIX</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
			<span class="n">env</span> <span class="o">=</span> <span class="n">ConfigSet</span><span class="o">.</span><span class="n">ConfigSet</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">abspath</span><span class="p">())</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">env</span>
			<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">env</span><span class="p">[</span><span class="n">CFG_FILES</span><span class="p">]:</span>
				<span class="n">newnode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">h</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">h_file</span><span class="p">(</span><span class="n">newnode</span><span class="o">.</span><span class="n">abspath</span><span class="p">())</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
					<span class="n">Logs</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;cannot find </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span>
					<span class="n">h</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">SIG_NIL</span>
				<span class="n">newnode</span><span class="o">.</span><span class="n">sig</span> <span class="o">=</span> <span class="n">h</span>
</div>
<div class="viewcode-block" id="BuildContext.init_dirs"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.init_dirs">[docs]</a>	<span class="k">def</span> <span class="nf">init_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the project directory and the build directory by creating the nodes</span>
<span class="sd">		:py:attr:`waflib.Build.BuildContext.srcnode` and :py:attr:`waflib.Build.BuildContext.bldnode`</span>
<span class="sd">		corresponding to ``top_dir`` and ``variant_dir`` respectively. The ``bldnode`` directory will be</span>
<span class="sd">		created if it does not exist.</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top_dir</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">out_dir</span><span class="p">)):</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;The project was not configured: run &quot;waf configure&quot; first!&#39;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top_dir</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bldnode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">make_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variant_dir</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bldnode</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuildContext.execute"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.execute">[docs]</a>	<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Restore the data from previous builds and call :py:meth:`waflib.Build.BuildContext.execute_build`. Overrides from :py:func:`waflib.Context.Context.execute`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">load_envs</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">execute_build</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuildContext.execute_build"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.execute_build">[docs]</a>	<span class="k">def</span> <span class="nf">execute_build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Execute the build by:</span>

<span class="sd">		* reading the scripts (see :py:meth:`waflib.Context.Context.recurse`)</span>
<span class="sd">		* calling :py:meth:`waflib.Build.BuildContext.pre_build` to call user build functions</span>
<span class="sd">		* calling :py:meth:`waflib.Build.BuildContext.compile` to process the tasks</span>
<span class="sd">		* calling :py:meth:`waflib.Build.BuildContext.post_build` to call user build functions</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Waf: Entering directory `</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">variant_dir</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">recurse</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">run_dir</span><span class="p">])</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pre_build</span><span class="p">()</span>

		<span class="c"># display the time elapsed in the progress bar</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">Timer</span><span class="p">()</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
			<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Logs</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">cursor_off</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
				<span class="n">c</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">returned_tasks</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">1</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progress_line</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">Logs</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">Logs</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">))</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
				<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
				<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Logs</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">cursor_on</span><span class="p">)</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Waf: Leaving directory `</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">variant_dir</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">post_build</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuildContext.restore"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.restore">[docs]</a>	<span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Load the data from a previous run, sets the attributes listed in :py:const:`waflib.Build.SAVED_ATTRS`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">env</span> <span class="o">=</span> <span class="n">ConfigSet</span><span class="o">.</span><span class="n">ConfigSet</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">,</span> <span class="s">&#39;build.config.py&#39;</span><span class="p">))</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
			<span class="k">pass</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;version&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Context</span><span class="o">.</span><span class="n">HEXVERSION</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;Version mismatch! reconfigure the project&#39;</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;tools&#39;</span><span class="p">]:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="o">**</span><span class="n">t</span><span class="p">)</span>

		<span class="n">f</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">dbfn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variant_dir</span><span class="p">,</span> <span class="n">Context</span><span class="o">.</span><span class="n">DBFILE</span><span class="p">)</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dbfn</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">EOFError</span><span class="p">):</span>
				<span class="c"># handle missing file/empty file</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;build: could not load the build cache </span><span class="si">%s</span><span class="s"> (missing)&#39;</span> <span class="o">%</span> <span class="n">dbfn</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">pickle_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
					<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">Nod3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_class</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">data</span> <span class="o">=</span> <span class="n">cPickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
					<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
						<span class="n">Logs</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;build: could not pickle the build cache </span><span class="si">%s</span><span class="s">: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dbfn</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">SAVED_ATTRS</span><span class="p">:</span>
							<span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
				<span class="k">finally</span><span class="p">:</span>
					<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">pickle_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">f</span><span class="p">:</span>
				<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">init_dirs</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuildContext.store"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.store">[docs]</a>	<span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Store the data for next runs, sets the attributes listed in :py:const:`waflib.Build.SAVED_ATTRS`. Uses a temporary</span>
<span class="sd">		file to avoid problems on ctrl+c.</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">SAVED_ATTRS</span><span class="p">:</span>
			<span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
		<span class="n">db</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variant_dir</span><span class="p">,</span> <span class="n">Context</span><span class="o">.</span><span class="n">DBFILE</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">pickle_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
			<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">Nod3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_class</span>

			<span class="n">f</span> <span class="o">=</span> <span class="bp">None</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">db</span> <span class="o">+</span> <span class="s">&#39;.tmp&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
				<span class="n">cPickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
			<span class="k">finally</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">f</span><span class="p">:</span>
					<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">pickle_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">st</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
			<span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">Utils</span><span class="o">.</span><span class="n">is_win32</span><span class="p">:</span> <span class="c"># win32 has no chown but we&#39;re paranoid</span>
				<span class="n">os</span><span class="o">.</span><span class="n">chown</span><span class="p">(</span><span class="n">db</span> <span class="o">+</span> <span class="s">&#39;.tmp&#39;</span><span class="p">,</span> <span class="n">st</span><span class="o">.</span><span class="n">st_uid</span><span class="p">,</span> <span class="n">st</span><span class="o">.</span><span class="n">st_gid</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
			<span class="k">pass</span>

		<span class="c"># do not use shutil.move (copy is not thread-safe)</span>
		<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">db</span> <span class="o">+</span> <span class="s">&#39;.tmp&#39;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.compile"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.compile">[docs]</a>	<span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Run the build by creating an instance of :py:class:`waflib.Runner.Parallel`</span>
<span class="sd">		The cache file is not written if the build is up to date (no task executed).</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">Logs</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;build: compile()&#39;</span><span class="p">)</span>

		<span class="c"># use another object to perform the producer-consumer logic (reduce the complexity)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">producer</span> <span class="o">=</span> <span class="n">Runner</span><span class="o">.</span><span class="n">Parallel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jobs</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">producer</span><span class="o">.</span><span class="n">biter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_iterator</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">returned_tasks</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># not part of the API yet</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">producer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
			<span class="k">raise</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">producer</span><span class="o">.</span><span class="n">dirty</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">producer</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">BuildError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">producer</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.setup"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.setup">[docs]</a>	<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool</span><span class="p">,</span> <span class="n">tooldir</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">funs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Import waf tools, used to import those accessed during the configuration::</span>

<span class="sd">			def configure(conf):</span>
<span class="sd">				conf.load(&#39;glib2&#39;)</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				pass # glib2 is imported implicitly</span>

<span class="sd">		:param tool: tool list</span>
<span class="sd">		:type tool: list</span>
<span class="sd">		:param tooldir: optional tool directory (sys.path)</span>
<span class="sd">		:type tooldir: list of string</span>
<span class="sd">		:param funs: unused variable</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tool</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">tooldir</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">module</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">load_tool</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="n">tooldir</span><span class="p">)</span>
		<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s">&quot;setup&quot;</span><span class="p">):</span> <span class="n">module</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.get_env"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_env">[docs]</a>	<span class="k">def</span> <span class="nf">get_env</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Getter for the env property&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">variant</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="BuildContext.set_env"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.set_env">[docs]</a>	<span class="k">def</span> <span class="nf">set_env</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Setter for the env property&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">variant</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</div>
	<span class="n">env</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_env</span><span class="p">,</span> <span class="n">set_env</span><span class="p">)</span>

<div class="viewcode-block" id="BuildContext.add_manual_dependency"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.add_manual_dependency">[docs]</a>	<span class="k">def</span> <span class="nf">add_manual_dependency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Adds a dependency from a node object to a value::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.add_manual_dependency(</span>
<span class="sd">					bld.path.find_resource(&#39;wscript&#39;),</span>
<span class="sd">					bld.root.find_resource(&#39;/etc/fstab&#39;))</span>

<span class="sd">		:param path: file path</span>
<span class="sd">		:type path: string or :py:class:`waflib.Node.Node`</span>
<span class="sd">		:param value: value to depend on</span>
<span class="sd">		:type value: :py:class:`waflib.Node.Node`, string, or function returning a string</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Invalid input&#39;</span><span class="p">)</span>

		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
			<span class="n">node</span> <span class="o">=</span> <span class="n">path</span>
		<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
			<span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">deps_man</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">)]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">deps_man</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.launch_node"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.launch_node">[docs]</a>	<span class="k">def</span> <span class="nf">launch_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Returns the launch directory as a :py:class:`waflib.Node.Node` object&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="c"># private cache</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_ln</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">p_ln</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">launch_dir</span><span class="p">)</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_ln</span>
</div>
<div class="viewcode-block" id="BuildContext.hash_env_vars"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.hash_env_vars">[docs]</a>	<span class="k">def</span> <span class="nf">hash_env_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">vars_lst</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Hash configuration set variables::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.hash_env_vars(bld.env, [&#39;CXX&#39;, &#39;CC&#39;])</span>

<span class="sd">		:param env: Configuration Set</span>
<span class="sd">		:type env: :py:class:`waflib.ConfigSet.ConfigSet`</span>
<span class="sd">		:param vars_lst: list of variables</span>
<span class="sd">		:type vars_list: list of string</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="o">.</span><span class="n">table</span><span class="p">:</span>
			<span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parent</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">Utils</span><span class="o">.</span><span class="n">SIG_NIL</span>

		<span class="n">idx</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">env</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">vars_lst</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">cache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_env</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="n">cache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_env</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_env</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
			<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
				<span class="k">pass</span>

		<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">env</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">vars_lst</span><span class="p">]</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">h_list</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
		<span class="n">Logs</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;envhash: </span><span class="si">%s</span><span class="s"> </span><span class="si">%r</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">Utils</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">lst</span><span class="p">)</span>

		<span class="n">cache</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span>

		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="BuildContext.get_tgen_by_name"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_tgen_by_name">[docs]</a>	<span class="k">def</span> <span class="nf">get_tgen_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Retrieves a task generator from its name or its target name</span>
<span class="sd">		the name must be unique::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				tg = bld(name=&#39;foo&#39;)</span>
<span class="sd">				tg == bld.get_tgen_by_name(&#39;foo&#39;)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">cache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_gen_cache_names</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">cache</span><span class="p">:</span>
			<span class="c"># create the index lazily</span>
			<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">cache</span><span class="p">[</span><span class="n">tg</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tg</span>
					<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
						<span class="c"># raised if not a task generator, which should be uncommon</span>
						<span class="k">pass</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;Could not find a task generator for the name </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.progress_line"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.progress_line">[docs]</a>	<span class="k">def</span> <span class="nf">progress_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compute the progress bar used by ``waf -p``</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">total</span><span class="p">))</span>

		<span class="n">Utils</span><span class="o">.</span><span class="n">rot_idx</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="n">ind</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">rot_chr</span><span class="p">[</span><span class="n">Utils</span><span class="o">.</span><span class="n">rot_idx</span> <span class="o">%</span> <span class="mi">4</span><span class="p">]</span>

		<span class="n">pc</span> <span class="o">=</span> <span class="p">(</span><span class="mf">100.</span><span class="o">*</span><span class="n">state</span><span class="p">)</span><span class="o">/</span><span class="n">total</span>
		<span class="n">eta</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="p">)</span>
		<span class="n">fs</span> <span class="o">=</span> <span class="s">&quot;[</span><span class="si">%%%d</span><span class="s">d/</span><span class="si">%%%d</span><span class="s">d][</span><span class="si">%%</span><span class="s">s</span><span class="si">%%</span><span class="s">2d</span><span class="si">%%%%%%</span><span class="s">s][</span><span class="si">%s</span><span class="s">][&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
		<span class="n">left</span> <span class="o">=</span> <span class="n">fs</span> <span class="o">%</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">col1</span><span class="p">,</span> <span class="n">pc</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span>
		<span class="n">right</span> <span class="o">=</span> <span class="s">&#39;][</span><span class="si">%s%s%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">eta</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span>

		<span class="n">cols</span> <span class="o">=</span> <span class="n">Logs</span><span class="o">.</span><span class="n">get_term_cols</span><span class="p">()</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">col1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">cols</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span> <span class="n">cols</span> <span class="o">=</span> <span class="mi">7</span>

		<span class="n">ratio</span> <span class="o">=</span> <span class="p">((</span><span class="n">cols</span><span class="o">*</span><span class="n">state</span><span class="p">)</span><span class="o">//</span><span class="n">total</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

		<span class="n">bar</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;=&#39;</span><span class="o">*</span><span class="n">ratio</span><span class="o">+</span><span class="s">&#39;&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">indicator</span> <span class="o">%</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">msg</span>
</div>
<div class="viewcode-block" id="BuildContext.declare_chain"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.declare_chain">[docs]</a>	<span class="k">def</span> <span class="nf">declare_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Wrapper for :py:func:`waflib.TaskGen.declare_chain` provided for convenience</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="n">TaskGen</span><span class="o">.</span><span class="n">declare_chain</span><span class="p">(</span><span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.pre_build"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.pre_build">[docs]</a>	<span class="k">def</span> <span class="nf">pre_build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Execute user-defined methods before the build starts, see :py:meth:`waflib.Build.BuildContext.add_pre_fun`&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;pre_funs&#39;</span><span class="p">,</span> <span class="p">[]):</span>
			<span class="n">m</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.post_build"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.post_build">[docs]</a>	<span class="k">def</span> <span class="nf">post_build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Executes the user-defined methods after the build is successful, see :py:meth:`waflib.Build.BuildContext.add_post_fun`&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;post_funs&#39;</span><span class="p">,</span> <span class="p">[]):</span>
			<span class="n">m</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.add_pre_fun"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.add_pre_fun">[docs]</a>	<span class="k">def</span> <span class="nf">add_pre_fun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meth</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Bind a method to execute after the scripts are read and before the build starts::</span>

<span class="sd">			def mycallback(bld):</span>
<span class="sd">				print(&quot;Hello, world!&quot;)</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.add_pre_fun(mycallback)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pre_funs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pre_funs</span> <span class="o">=</span> <span class="p">[</span><span class="n">meth</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="BuildContext.add_post_fun"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.add_post_fun">[docs]</a>	<span class="k">def</span> <span class="nf">add_post_fun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meth</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Bind a method to execute immediately after the build is successful::</span>

<span class="sd">			def call_ldconfig(bld):</span>
<span class="sd">				bld.exec_command(&#39;/sbin/ldconfig&#39;)</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				if bld.cmd == &#39;install&#39;:</span>
<span class="sd">					bld.add_pre_fun(call_ldconfig)</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">post_funs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">post_funs</span> <span class="o">=</span> <span class="p">[</span><span class="n">meth</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="BuildContext.get_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_group">[docs]</a>	<span class="k">def</span> <span class="nf">get_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the group x, or return the current group if x is None</span>

<span class="sd">		:param x: name or number or None</span>
<span class="sd">		:type x: string, int or None</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_group</span><span class="p">]</span>
		<span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="BuildContext.add_to_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.add_to_group">[docs]</a>	<span class="k">def</span> <span class="nf">add_to_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tgen</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;add a task or a task generator for the build&quot;&quot;&quot;</span>
		<span class="c"># paranoid</span>
		<span class="k">assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">tgen</span><span class="p">,</span> <span class="n">TaskGen</span><span class="o">.</span><span class="n">task_gen</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tgen</span><span class="p">,</span> <span class="n">Task</span><span class="o">.</span><span class="n">TaskBase</span><span class="p">))</span>
		<span class="n">tgen</span><span class="o">.</span><span class="n">bld</span> <span class="o">=</span> <span class="bp">self</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tgen</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.get_group_name"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_group_name">[docs]</a>	<span class="k">def</span> <span class="nf">get_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;name for the group g (utility)&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
			<span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">:</span>
			<span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">x</span>
		<span class="k">return</span> <span class="s">&#39;&#39;</span>
</div>
<div class="viewcode-block" id="BuildContext.get_group_idx"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_group_idx">[docs]</a>	<span class="k">def</span> <span class="nf">get_group_idx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index of the group containing the task generator given as argument::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				tg = bld(name=&#39;nada&#39;)</span>
<span class="sd">				0 == bld.get_group_idx(tg)</span>

<span class="sd">		:param tg: Task generator object</span>
<span class="sd">		:type tg: :py:class:`waflib.TaskGen.task_gen`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">se</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">tg</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">)):</span>
			<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
				<span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="n">se</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">i</span>
		<span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="BuildContext.add_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.add_group">[docs]</a>	<span class="k">def</span> <span class="nf">add_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">move</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a new group of tasks/task generators. By default the new group becomes the default group for new task generators.</span>

<span class="sd">		:param name: name for this group</span>
<span class="sd">		:type name: string</span>
<span class="sd">		:param move: set the group created as default group (True by default)</span>
<span class="sd">		:type move: bool</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c">#if self.groups and not self.groups[0].tasks:</span>
		<span class="c">#	error(&#39;add_group: an empty group is already present&#39;)</span>
		<span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">:</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;add_group: name </span><span class="si">%s</span><span class="s"> already present&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
		<span class="n">g</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">move</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">current_group</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="BuildContext.set_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.set_group">[docs]</a>	<span class="k">def</span> <span class="nf">set_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Set the current group to be idx: now new task generators will be added to this group by default::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld(rule=&#39;touch ${TGT}&#39;, target=&#39;foo.txt&#39;)</span>
<span class="sd">				bld.add_group() # now the current group is 1</span>
<span class="sd">				bld(rule=&#39;touch ${TGT}&#39;, target=&#39;bar.txt&#39;)</span>
<span class="sd">				bld.set_group(0) # now the current group is 0</span>
<span class="sd">				bld(rule=&#39;touch ${TGT}&#39;, target=&#39;truc.txt&#39;) # build truc.txt before bar.txt</span>

<span class="sd">		:param idx: group name or group index</span>
<span class="sd">		:type idx: string or int</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
			<span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">)):</span>
				<span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">current_group</span> <span class="o">=</span> <span class="n">i</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">current_group</span> <span class="o">=</span> <span class="n">idx</span>
</div>
<div class="viewcode-block" id="BuildContext.total"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.total">[docs]</a>	<span class="k">def</span> <span class="nf">total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Approximate task count: this value may be inaccurate if task generators are posted lazily (see :py:attr:`waflib.Build.BuildContext.post_mode`).</span>
<span class="sd">		The value :py:attr:`waflib.Runner.Parallel.total` is updated during the task execution.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="n">group</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tg</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
					<span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="k">return</span> <span class="n">total</span>
</div>
<div class="viewcode-block" id="BuildContext.get_targets"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_targets">[docs]</a>	<span class="k">def</span> <span class="nf">get_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Return the task generator corresponding to the &#39;targets&#39; list, used by :py:meth:`waflib.Build.BuildContext.get_build_iterator`::</span>

<span class="sd">			$ waf --targets=myprogram,myshlib</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">to_post</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">min_grp</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">):</span>
			<span class="n">tg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tgen_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">tg</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;target </span><span class="si">%r</span><span class="s"> does not exist&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_idx</span><span class="p">(</span><span class="n">tg</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">min_grp</span><span class="p">:</span>
				<span class="n">min_grp</span> <span class="o">=</span> <span class="n">m</span>
				<span class="n">to_post</span> <span class="o">=</span> <span class="p">[</span><span class="n">tg</span><span class="p">]</span>
			<span class="k">elif</span> <span class="n">m</span> <span class="o">==</span> <span class="n">min_grp</span><span class="p">:</span>
				<span class="n">to_post</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tg</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">(</span><span class="n">min_grp</span><span class="p">,</span> <span class="n">to_post</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuildContext.get_all_task_gen"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_all_task_gen">[docs]</a>	<span class="k">def</span> <span class="nf">get_all_task_gen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Utility method, returns a list of all task generators - if you need something more complicated, implement your own</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
			<span class="n">lst</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">lst</span>
</div>
<div class="viewcode-block" id="BuildContext.post_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.post_group">[docs]</a>	<span class="k">def</span> <span class="nf">post_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Post the task generators from the group indexed by self.cur, used by :py:meth:`waflib.Build.BuildContext.get_build_iterator`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">]:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">f</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">post</span>
				<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
					<span class="k">pass</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">f</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_grp</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">]:</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">f</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">post</span>
					<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
						<span class="k">pass</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">f</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exact_tg</span><span class="p">:</span>
					<span class="n">tg</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">ln</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">launch_node</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">ln</span><span class="o">.</span><span class="n">is_child_of</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bldnode</span><span class="p">):</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;Building from the build directory, forcing --targets=*&#39;</span><span class="p">)</span>
				<span class="n">ln</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span>
			<span class="k">elif</span> <span class="ow">not</span> <span class="n">ln</span><span class="o">.</span><span class="n">is_child_of</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span><span class="p">):</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;CWD </span><span class="si">%s</span><span class="s"> is not under </span><span class="si">%s</span><span class="s">, forcing --targets=* (run distclean?)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ln</span><span class="o">.</span><span class="n">abspath</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span><span class="o">.</span><span class="n">abspath</span><span class="p">()))</span>
				<span class="n">ln</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span>
			<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">]:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">f</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">post</span>
				<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
					<span class="k">pass</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">tg</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">is_child_of</span><span class="p">(</span><span class="n">ln</span><span class="p">):</span>
						<span class="n">f</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuildContext.get_tasks_group"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_tasks_group">[docs]</a>	<span class="k">def</span> <span class="nf">get_tasks_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Return all the tasks for the group of num idx, used by :py:meth:`waflib.Build.BuildContext.get_build_iterator`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">tasks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">tg</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span> <span class="c"># not a task generator, can be the case for installation tasks</span>
				<span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tg</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tasks</span>
</div>
<div class="viewcode-block" id="BuildContext.get_build_iterator"><a class="viewcode-back" href="../../Build.html#waflib.Build.BuildContext.get_build_iterator">[docs]</a>	<span class="k">def</span> <span class="nf">get_build_iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Creates a generator object that returns lists of tasks executable in parallel (yield)</span>

<span class="sd">		:return: tasks which can be executed immediatly</span>
<span class="sd">		:rtype: list of :py:class:`waflib.Task.TaskBase`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="o">!=</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
			<span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_grp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exact_tg</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_targets</span><span class="p">()</span>

		<span class="k">global</span> <span class="n">lazy_post</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_mode</span> <span class="o">!=</span> <span class="n">POST_LAZY</span><span class="p">:</span>
			<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">post_group</span><span class="p">()</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
			<span class="c"># first post the task generators for the group</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_mode</span> <span class="o">!=</span> <span class="n">POST_AT_ONCE</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">post_group</span><span class="p">()</span>

			<span class="c"># then extract the tasks</span>
			<span class="n">tasks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tasks_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">)</span>
			<span class="c"># if the constraints are set properly (ext_in/ext_out, before/after)</span>
			<span class="c"># the call to set_file_constraints may be removed (can be a 15% penalty on no-op rebuilds)</span>
			<span class="c"># (but leave set_file_constraints for the installation step)</span>
			<span class="c">#</span>
			<span class="c"># if the tasks have only files, set_file_constraints is required but set_precedence_constraints is not necessary</span>
			<span class="c">#</span>
			<span class="n">Task</span><span class="o">.</span><span class="n">set_file_constraints</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
			<span class="n">Task</span><span class="o">.</span><span class="n">set_precedence_constraints</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">cur_tasks</span> <span class="o">=</span> <span class="n">tasks</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">tasks</span><span class="p">:</span> <span class="c"># return something else the build will stop</span>
				<span class="k">continue</span>
			<span class="k">yield</span> <span class="n">tasks</span>
		<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
			<span class="k">yield</span> <span class="p">[]</span>


	<span class="c">#def install_dir(self, path, env=None):</span>
	<span class="c">#	&quot;&quot;&quot;</span>
	<span class="c">#	Create empty folders for the installation (very rarely used) TODO</span>
	<span class="c">#	&quot;&quot;&quot;</span>
	<span class="c">#	return</span>
</div></div>
<div class="viewcode-block" id="inst"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst">[docs]</a><span class="k">class</span> <span class="nc">inst</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Special task used for installing files and symlinks, it behaves both like a task</span>
<span class="sd">	and like a task generator</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">color</span> <span class="o">=</span> <span class="s">&#39;CYAN&#39;</span>

	<span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
		<span class="k">return</span> <span class="n">Utils</span><span class="o">.</span><span class="n">h_list</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span>

<div class="viewcode-block" id="inst.post"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.post">[docs]</a>	<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Same interface as in :py:meth:`waflib.TaskGen.task_gen.post`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">:</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
				<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">y</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">Logs</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
						<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;Could not find </span><span class="si">%s</span><span class="s"> immediately (may cause broken builds)&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
					<span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">bld</span><span class="o">.</span><span class="n">get_group_idx</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
					<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">bld</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span>
						<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tg</span><span class="p">,</span> <span class="n">inst</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">id</span><span class="p">(</span><span class="n">tg</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
							<span class="n">tg</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
						<span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">y</span><span class="p">:</span>
							<span class="k">break</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;could not find </span><span class="si">%r</span><span class="s"> in </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>
			<span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">inputs</span> <span class="o">=</span> <span class="n">buf</span>
</div>
<div class="viewcode-block" id="inst.runnable_status"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.runnable_status">[docs]</a>	<span class="k">def</span> <span class="nf">runnable_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Installation tasks are always executed, so this method returns either :py:const:`waflib.Task.ASK_LATER` or :py:const:`waflib.Task.RUN_ME`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">runnable_status</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">Task</span><span class="o">.</span><span class="n">SKIP_ME</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">Task</span><span class="o">.</span><span class="n">RUN_ME</span>
		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="inst.__str__"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.__str__">[docs]</a>	<span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Return an empty string to disable the display&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="s">&#39;&#39;</span>
</div>
	<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;The attribute &#39;exec_task&#39; holds the method to execute&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">exec_task</span><span class="p">()</span>

<div class="viewcode-block" id="inst.get_install_path"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.get_install_path">[docs]</a>	<span class="k">def</span> <span class="nf">get_install_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destdir</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Installation path obtained from ``self.dest`` and prefixed by the destdir.</span>
<span class="sd">		The variables such as &#39;${PREFIX}/bin&#39; are substituted.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">dest</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">subst_vars</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
		<span class="n">dest</span> <span class="o">=</span> <span class="n">dest</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">destdir</span> <span class="ow">and</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">destdir</span><span class="p">:</span>
			<span class="n">dest</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">destdir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitdrive</span><span class="p">(</span><span class="n">dest</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">dest</span>
</div>
<div class="viewcode-block" id="inst.exec_install_files"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.exec_install_files">[docs]</a>	<span class="k">def</span> <span class="nf">exec_install_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Predefined method for installing files</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">destpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_install_path</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">destpath</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;unknown installation path </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">):</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_trick</span><span class="p">:</span>
				<span class="n">destfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">destpath</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">path_from</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>
				<span class="n">Utils</span><span class="o">.</span><span class="n">check_dir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">destfile</span><span class="p">))</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">destfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">destpath</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">bld</span><span class="o">.</span><span class="n">do_install</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">abspath</span><span class="p">(),</span> <span class="n">destfile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chmod</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="inst.exec_install_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.exec_install_as">[docs]</a>	<span class="k">def</span> <span class="nf">exec_install_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Predefined method for installing one file with a given name</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">destfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_install_path</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">bld</span><span class="o">.</span><span class="n">do_install</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">abspath</span><span class="p">(),</span> <span class="n">destfile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chmod</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="inst.exec_symlink_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.inst.exec_symlink_as">[docs]</a>	<span class="k">def</span> <span class="nf">exec_symlink_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Predefined method for installing a symlink</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">destfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_install_path</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">bld</span><span class="o">.</span><span class="n">do_link</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="p">,</span> <span class="n">destfile</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="InstallContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext">[docs]</a><span class="k">class</span> <span class="nc">InstallContext</span><span class="p">(</span><span class="n">BuildContext</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;installs the targets on the system&#39;&#39;&#39;</span>
	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;install&#39;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">InstallContext</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>

		<span class="c"># list of targets to uninstall for removing the empty folders after uninstalling</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">uninstall</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_install</span> <span class="o">=</span> <span class="n">INSTALL</span>

<div class="viewcode-block" id="InstallContext.do_install"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.do_install">[docs]</a>	<span class="k">def</span> <span class="nf">do_install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">,</span> <span class="n">chmod</span><span class="o">=</span><span class="n">Utils</span><span class="o">.</span><span class="n">O644</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Copy a file from src to tgt with given file permissions. The actual copy is not performed</span>
<span class="sd">		if the source and target file have the same size and the same timestamps. When the copy occurs,</span>
<span class="sd">		the file is first removed and then copied (prevent stale inodes).</span>

<span class="sd">		This method is overridden in :py:meth:`waflib.Build.UninstallContext.do_install` to remove the file.</span>

<span class="sd">		:param src: file name as absolute path</span>
<span class="sd">		:type src: string</span>
<span class="sd">		:param tgt: file destination, as absolute path</span>
<span class="sd">		:type tgt: string</span>
<span class="sd">		:param chmod: installation mode</span>
<span class="sd">		:type chmod: int</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">d</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">d</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;Invalid installation given </span><span class="si">%r</span><span class="s">-&gt;</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">))</span>
		<span class="n">Utils</span><span class="o">.</span><span class="n">check_dir</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

		<span class="n">srclbl</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span><span class="o">.</span><span class="n">abspath</span><span class="p">()</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">force</span><span class="p">:</span>
			<span class="c"># check if the file is already there to avoid a copy</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">st1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
				<span class="n">st2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
				<span class="k">pass</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c"># same size and identical timestamps -&gt; make no copy</span>
				<span class="k">if</span> <span class="n">st1</span><span class="o">.</span><span class="n">st_mtime</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&gt;=</span> <span class="n">st2</span><span class="o">.</span><span class="n">st_mtime</span> <span class="ow">and</span> <span class="n">st1</span><span class="o">.</span><span class="n">st_size</span> <span class="o">==</span> <span class="n">st2</span><span class="o">.</span><span class="n">st_size</span><span class="p">:</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
						<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;- install </span><span class="si">%s</span><span class="s"> (from </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tgt</span><span class="p">,</span> <span class="n">srclbl</span><span class="p">))</span>
					<span class="k">return</span> <span class="bp">False</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;+ install </span><span class="si">%s</span><span class="s"> (from </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tgt</span><span class="p">,</span> <span class="n">srclbl</span><span class="p">))</span>

		<span class="c"># following is for shared libs and stale inodes (-_-)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
			<span class="k">pass</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">)</span>
			<span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">tgt</span><span class="p">,</span> <span class="n">chmod</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">IOError</span><span class="p">):</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;File </span><span class="si">%r</span><span class="s"> does not exist&#39;</span> <span class="o">%</span> <span class="n">src</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;Could not install the file </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">tgt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="InstallContext.do_link"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.do_link">[docs]</a>	<span class="k">def</span> <span class="nf">do_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a symlink from tgt to src.</span>

<span class="sd">		This method is overridden in :py:meth:`waflib.Build.UninstallContext.do_link` to remove the symlink.</span>

<span class="sd">		:param src: file name as absolute path</span>
<span class="sd">		:type src: string</span>
<span class="sd">		:param tgt: file destination, as absolute path</span>
<span class="sd">		:type tgt: string</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">d</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="n">Utils</span><span class="o">.</span><span class="n">check_dir</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

		<span class="n">link</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">tgt</span><span class="p">):</span>
			<span class="n">link</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span> <span class="o">!=</span> <span class="n">src</span><span class="p">:</span>
			<span class="n">link</span> <span class="o">=</span> <span class="bp">True</span>

		<span class="k">if</span> <span class="n">link</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span> <span class="k">pass</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;+ symlink </span><span class="si">%s</span><span class="s"> (to </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tgt</span><span class="p">,</span> <span class="n">src</span><span class="p">))</span>
			<span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;- symlink </span><span class="si">%s</span><span class="s"> (to </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tgt</span><span class="p">,</span> <span class="n">src</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="InstallContext.run_task_now"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.run_task_now">[docs]</a>	<span class="k">def</span> <span class="nf">run_task_now</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tsk</span><span class="p">,</span> <span class="n">postpone</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		This method is called by :py:meth:`waflib.Build.InstallContext.install_files`,</span>
<span class="sd">		:py:meth:`waflib.Build.InstallContext.install_as` and :py:meth:`waflib.Build.InstallContext.symlink_as` immediately</span>
<span class="sd">		after the installation task is created. Its role is to force the immediate execution if necessary, that is when</span>
<span class="sd">		``postpone=False`` was given.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">postpone</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">tsk</span><span class="o">.</span><span class="n">runnable_status</span><span class="p">()</span> <span class="o">==</span> <span class="n">Task</span><span class="o">.</span><span class="n">ASK_LATER</span><span class="p">:</span>
				<span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">WafError</span><span class="p">(</span><span class="s">&#39;cannot post the task </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">tsk</span><span class="p">)</span>
			<span class="n">tsk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="InstallContext.install_files"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.install_files">[docs]</a>	<span class="k">def</span> <span class="nf">install_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">chmod</span><span class="o">=</span><span class="n">Utils</span><span class="o">.</span><span class="n">O644</span><span class="p">,</span> <span class="n">relative_trick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">postpone</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a task to install files on the system::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.install_files(&#39;${DATADIR}&#39;, self.path.find_resource(&#39;wscript&#39;))</span>

<span class="sd">		:param dest: absolute path of the destination directory</span>
<span class="sd">		:type dest: string</span>
<span class="sd">		:param files: input files</span>
<span class="sd">		:type files: list of strings or list of nodes</span>
<span class="sd">		:param env: configuration set for performing substitutions in dest</span>
<span class="sd">		:type env: Configuration set</span>
<span class="sd">		:param relative_trick: preserve the folder hierarchy when installing whole folders</span>
<span class="sd">		:type relative_trick: bool</span>
<span class="sd">		:param cwd: parent node for searching srcfile, when srcfile is not a :py:class:`waflib.Node.Node`</span>
<span class="sd">		:type cwd: :py:class:`waflib.Node.Node`</span>
<span class="sd">		:param add: add the task created to a build group - set ``False`` only if the installation task is created after the build has started</span>
<span class="sd">		:type add: bool</span>
<span class="sd">		:param postpone: execute the task immediately to perform the installation</span>
<span class="sd">		:type postpone: bool</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">tsk</span> <span class="o">=</span> <span class="n">inst</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">bld</span> <span class="o">=</span> <span class="bp">self</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">cwd</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">chmod</span> <span class="o">=</span> <span class="n">chmod</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">waflib</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
			<span class="n">tsk</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span>  <span class="p">[</span><span class="n">files</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">tsk</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">dest</span> <span class="o">=</span> <span class="n">dest</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">exec_task</span> <span class="o">=</span> <span class="n">tsk</span><span class="o">.</span><span class="n">exec_install_files</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">relative_trick</span> <span class="o">=</span> <span class="n">relative_trick</span>
		<span class="k">if</span> <span class="n">add</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_to_group</span><span class="p">(</span><span class="n">tsk</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">run_task_now</span><span class="p">(</span><span class="n">tsk</span><span class="p">,</span> <span class="n">postpone</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tsk</span>
</div>
<div class="viewcode-block" id="InstallContext.install_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.install_as">[docs]</a>	<span class="k">def</span> <span class="nf">install_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">srcfile</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">chmod</span><span class="o">=</span><span class="n">Utils</span><span class="o">.</span><span class="n">O644</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">postpone</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a task to install a file on the system with a different name::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.install_as(&#39;${PREFIX}/bin&#39;, &#39;myapp&#39;, chmod=Utils.O755)</span>

<span class="sd">		:param dest: absolute path of the destination file</span>
<span class="sd">		:type dest: string</span>
<span class="sd">		:param srcfile: input file</span>
<span class="sd">		:type srcfile: string or node</span>
<span class="sd">		:param cwd: parent node for searching srcfile, when srcfile is not a :py:class:`waflib.Node.Node`</span>
<span class="sd">		:type cwd: :py:class:`waflib.Node.Node`</span>
<span class="sd">		:param env: configuration set for performing substitutions in dest</span>
<span class="sd">		:type env: Configuration set</span>
<span class="sd">		:param add: add the task created to a build group - set ``False`` only if the installation task is created after the build has started</span>
<span class="sd">		:type add: bool</span>
<span class="sd">		:param postpone: execute the task immediately to perform the installation</span>
<span class="sd">		:type postpone: bool</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">tsk</span> <span class="o">=</span> <span class="n">inst</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">bld</span> <span class="o">=</span> <span class="bp">self</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">cwd</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">chmod</span> <span class="o">=</span> <span class="n">chmod</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="n">srcfile</span><span class="p">]</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">dest</span> <span class="o">=</span> <span class="n">dest</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">exec_task</span> <span class="o">=</span> <span class="n">tsk</span><span class="o">.</span><span class="n">exec_install_as</span>
		<span class="k">if</span> <span class="n">add</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_to_group</span><span class="p">(</span><span class="n">tsk</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">run_task_now</span><span class="p">(</span><span class="n">tsk</span><span class="p">,</span> <span class="n">postpone</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tsk</span>
</div>
<div class="viewcode-block" id="InstallContext.symlink_as"><a class="viewcode-back" href="../../Build.html#waflib.Build.InstallContext.symlink_as">[docs]</a>	<span class="k">def</span> <span class="nf">symlink_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">postpone</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a task to install a symlink::</span>

<span class="sd">			def build(bld):</span>
<span class="sd">				bld.symlink_as(&#39;${PREFIX}/lib/libfoo.so&#39;, &#39;libfoo.so.1.2.3&#39;)</span>

<span class="sd">		:param dest: absolute path of the symlink</span>
<span class="sd">		:type dest: string</span>
<span class="sd">		:param src: absolute or relative path of the link</span>
<span class="sd">		:type src: string</span>
<span class="sd">		:param env: configuration set for performing substitutions in dest</span>
<span class="sd">		:type env: Configuration set</span>
<span class="sd">		:param add: add the task created to a build group - set ``False`` only if the installation task is created after the build has started</span>
<span class="sd">		:type add: bool</span>
<span class="sd">		:param postpone: execute the task immediately to perform the installation</span>
<span class="sd">		:type postpone: bool</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="k">if</span> <span class="n">Utils</span><span class="o">.</span><span class="n">is_win32</span><span class="p">:</span>
			<span class="c"># symlinks *cannot* work on that platform</span>
			<span class="k">return</span>

		<span class="n">tsk</span> <span class="o">=</span> <span class="n">inst</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">bld</span> <span class="o">=</span> <span class="bp">self</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">dest</span> <span class="o">=</span> <span class="n">dest</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">cwd</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="n">src</span>
		<span class="n">tsk</span><span class="o">.</span><span class="n">exec_task</span> <span class="o">=</span> <span class="n">tsk</span><span class="o">.</span><span class="n">exec_symlink_as</span>
		<span class="k">if</span> <span class="n">add</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_to_group</span><span class="p">(</span><span class="n">tsk</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">run_task_now</span><span class="p">(</span><span class="n">tsk</span><span class="p">,</span> <span class="n">postpone</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tsk</span>
</div></div>
<div class="viewcode-block" id="UninstallContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.UninstallContext">[docs]</a><span class="k">class</span> <span class="nc">UninstallContext</span><span class="p">(</span><span class="n">InstallContext</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;removes the targets installed&#39;&#39;&#39;</span>
	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;uninstall&#39;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">UninstallContext</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_install</span> <span class="o">=</span> <span class="n">UNINSTALL</span>

<div class="viewcode-block" id="UninstallContext.do_install"><a class="viewcode-back" href="../../Build.html#waflib.Build.UninstallContext.do_install">[docs]</a>	<span class="k">def</span> <span class="nf">do_install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">,</span> <span class="n">chmod</span><span class="o">=</span><span class="n">Utils</span><span class="o">.</span><span class="n">O644</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;See :py:meth:`waflib.Build.InstallContext.do_install`&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;- remove </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">tgt</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">uninstall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">:</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;uninstall_error&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">uninstall_error</span> <span class="o">=</span> <span class="bp">True</span>
					<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;build: some files could not be uninstalled (retry with -vv to list them)&#39;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">Logs</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
					<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;could not remove </span><span class="si">%s</span><span class="s"> (error code </span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span><span class="p">))</span>

		<span class="c"># TODO ita refactor this into a post build action to uninstall the folders (optimization)</span>
		<span class="k">while</span> <span class="n">tgt</span><span class="p">:</span>
			<span class="n">tgt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
				<span class="k">break</span>
</div>
<div class="viewcode-block" id="UninstallContext.do_link"><a class="viewcode-back" href="../../Build.html#waflib.Build.UninstallContext.do_link">[docs]</a>	<span class="k">def</span> <span class="nf">do_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;See :py:meth:`waflib.Build.InstallContext.do_link`&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">:</span>
				<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;- unlink </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">tgt</span><span class="p">)</span>
			<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
			<span class="k">pass</span>

		<span class="c"># TODO ita refactor this into a post build action to uninstall the folders (optimization)?</span>
		<span class="k">while</span> <span class="n">tgt</span><span class="p">:</span>
			<span class="n">tgt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">tgt</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
				<span class="k">break</span>
</div>
<div class="viewcode-block" id="UninstallContext.execute"><a class="viewcode-back" href="../../Build.html#waflib.Build.UninstallContext.execute">[docs]</a>	<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		See :py:func:`waflib.Context.Context.execute`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="c"># do not execute any tasks</span>
			<span class="k">def</span> <span class="nf">runnable_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">Task</span><span class="o">.</span><span class="n">SKIP_ME</span>
			<span class="nb">setattr</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="p">,</span> <span class="s">&#39;runnable_status_back&#39;</span><span class="p">,</span> <span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="o">.</span><span class="n">runnable_status</span><span class="p">)</span>
			<span class="nb">setattr</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="p">,</span> <span class="s">&#39;runnable_status&#39;</span><span class="p">,</span> <span class="n">runnable_status</span><span class="p">)</span>

			<span class="nb">super</span><span class="p">(</span><span class="n">UninstallContext</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="nb">setattr</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="p">,</span> <span class="s">&#39;runnable_status&#39;</span><span class="p">,</span> <span class="n">Task</span><span class="o">.</span><span class="n">Task</span><span class="o">.</span><span class="n">runnable_status_back</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="CleanContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.CleanContext">[docs]</a><span class="k">class</span> <span class="nc">CleanContext</span><span class="p">(</span><span class="n">BuildContext</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;cleans the project&#39;&#39;&#39;</span>
	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;clean&#39;</span>
<div class="viewcode-block" id="CleanContext.execute"><a class="viewcode-back" href="../../Build.html#waflib.Build.CleanContext.execute">[docs]</a>	<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		See :py:func:`waflib.Context.Context.execute`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">load_envs</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">recurse</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">run_dir</span><span class="p">])</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CleanContext.clean"><a class="viewcode-back" href="../../Build.html#waflib.Build.CleanContext.clean">[docs]</a>	<span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;Remove files from the build directory if possible, and reset the caches&quot;&quot;&quot;</span>
		<span class="n">Logs</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;build: clean called&#39;</span><span class="p">)</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bldnode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcnode</span><span class="p">:</span>
			<span class="c"># would lead to a disaster if top == out</span>
			<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_or_declare</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="n">CFG_FILES</span><span class="p">]]</span>
			<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bldnode</span><span class="o">.</span><span class="n">ant_glob</span><span class="p">(</span><span class="s">&#39;**/*&#39;</span><span class="p">,</span> <span class="n">excl</span><span class="o">=</span><span class="s">&#39;.lock* *conf_check_*/** config.log c4che/*&#39;</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
					<span class="k">continue</span>
				<span class="n">n</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="s">&#39;node_deps task_sigs raw_deps&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
			<span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span>
</div></div>
<div class="viewcode-block" id="ListContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.ListContext">[docs]</a><span class="k">class</span> <span class="nc">ListContext</span><span class="p">(</span><span class="n">BuildContext</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;lists the targets to execute&#39;&#39;&#39;</span>

	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;list&#39;</span>
<div class="viewcode-block" id="ListContext.execute"><a class="viewcode-back" href="../../Build.html#waflib.Build.ListContext.execute">[docs]</a>	<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		See :py:func:`waflib.Context.Context.execute`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_envs</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">load_envs</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">recurse</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">run_dir</span><span class="p">])</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pre_build</span><span class="p">()</span>

		<span class="c"># display the time elapsed in the progress bar</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">Timer</span><span class="p">()</span>

		<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">f</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">post</span>
				<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
					<span class="k">pass</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">f</span><span class="p">()</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c"># force the cache initialization</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">get_tgen_by_name</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_gen_cache_names</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
		<span class="n">lst</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="s">&#39;GREEN&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="StepContext"><a class="viewcode-back" href="../../Build.html#waflib.Build.StepContext">[docs]</a><span class="k">class</span> <span class="nc">StepContext</span><span class="p">(</span><span class="n">BuildContext</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;executes tasks in a step-by-step fashion, for debugging&#39;&#39;&#39;</span>
	<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;step&#39;</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">StepContext</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">Options</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">files</span>

<div class="viewcode-block" id="StepContext.compile"><a class="viewcode-back" href="../../Build.html#waflib.Build.StepContext.compile">[docs]</a>	<span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compile the tasks matching the input/output files given (regular expression matching). Derived from :py:meth:`waflib.Build.BuildContext.compile`::</span>

<span class="sd">			$ waf step --files=foo.c,bar.c,in:truc.c,out:bar.o</span>
<span class="sd">			$ waf step --files=in:foo.cpp.1.o # link task only</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
			<span class="n">Logs</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;Add a pattern for the debug build, for example &quot;waf step --files=main.c,app&quot;&#39;</span><span class="p">)</span>
			<span class="n">BuildContext</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">targets</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="o">!=</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
			<span class="n">targets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">targets</span> <span class="ow">and</span> <span class="n">tg</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
					<span class="k">continue</span>

				<span class="k">try</span><span class="p">:</span>
					<span class="n">f</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">post</span>
				<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
					<span class="k">pass</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">f</span><span class="p">()</span>

			<span class="k">for</span> <span class="n">pat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">):</span>
				<span class="n">matcher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_matcher</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span>
				<span class="k">for</span> <span class="n">tg</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tg</span><span class="p">,</span> <span class="n">Task</span><span class="o">.</span><span class="n">TaskBase</span><span class="p">):</span>
						<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">tg</span><span class="p">]</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">lst</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">tasks</span>
					<span class="k">for</span> <span class="n">tsk</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
						<span class="n">do_exec</span> <span class="o">=</span> <span class="bp">False</span>
						<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tsk</span><span class="p">,</span> <span class="s">&#39;inputs&#39;</span><span class="p">,</span> <span class="p">[]):</span>
							<span class="k">if</span> <span class="n">matcher</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
								<span class="n">do_exec</span> <span class="o">=</span> <span class="bp">True</span>
								<span class="k">break</span>
						<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tsk</span><span class="p">,</span> <span class="s">&#39;outputs&#39;</span><span class="p">,</span> <span class="p">[]):</span>
							<span class="k">if</span> <span class="n">matcher</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
								<span class="n">do_exec</span> <span class="o">=</span> <span class="bp">True</span>
								<span class="k">break</span>
						<span class="k">if</span> <span class="n">do_exec</span><span class="p">:</span>
							<span class="n">ret</span> <span class="o">=</span> <span class="n">tsk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
							<span class="n">Logs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> -&gt; exit </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tsk</span><span class="p">),</span> <span class="n">ret</span><span class="p">))</span>
</div>
	<span class="k">def</span> <span class="nf">get_matcher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">):</span>
		<span class="c"># this returns a function</span>
		<span class="n">inn</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">out</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="k">if</span> <span class="n">pat</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;in:&#39;</span><span class="p">):</span>
			<span class="n">out</span> <span class="o">=</span> <span class="bp">False</span>
			<span class="n">pat</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;in:&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">pat</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;out:&#39;</span><span class="p">):</span>
			<span class="n">inn</span> <span class="o">=</span> <span class="bp">False</span>
			<span class="n">pat</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;out:&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

		<span class="n">anode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find_node</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span>
		<span class="n">pattern</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">anode</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">pat</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;^&#39;</span><span class="p">):</span>
				<span class="n">pat</span> <span class="o">=</span> <span class="s">&#39;^.+?</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">pat</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">pat</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">):</span>
				<span class="n">pat</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">$&#39;</span> <span class="o">%</span> <span class="n">pat</span>
			<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span>

		<span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
			<span class="k">if</span> <span class="n">output</span> <span class="o">==</span> <span class="bp">True</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">out</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">False</span>
			<span class="k">if</span> <span class="n">output</span> <span class="o">==</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">inn</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">False</span>

			<span class="k">if</span> <span class="n">anode</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">anode</span> <span class="o">==</span> <span class="n">node</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">abspath</span><span class="p">())</span>
		<span class="k">return</span> <span class="n">match</span>
</div>
<span class="n">BuildContext</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">nogc</span><span class="p">(</span><span class="n">BuildContext</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
<span class="n">BuildContext</span><span class="o">.</span><span class="n">restore</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">nogc</span><span class="p">(</span><span class="n">BuildContext</span><span class="o">.</span><span class="n">restore</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/waf-64x64.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Waf v1.7.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; <a href="../../copyright.html">Copyright</a> 2010, Thomas Nagy.
    </div>

  </body>
</html>